<app-navbar></app-navbar>

<div style="position: fixed; top:0; left:0; width:100%; height:100%; z-index:-1; overflow:hidden;">
  <img src="assets/Engine.jpg" style="width:100%; height:100%; object-fit:cover;" />
</div>

<div style="padding:24px; max-width:1400px; margin:auto;">
  <!-- Header with Navigation -->
  <div style="background:rgba(255,255,255,0.95); padding:20px; border-radius:8px; margin-bottom:20px; box-shadow:0 2px 8px rgba(0,0,0,0.1);">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
      <button mat-icon-button (click)="previousMonth()">
        <mat-icon>chevron_left</mat-icon>
      </button>
      
      <h2 style="margin:0; font-size:24px; font-weight:500;">
        {{ monthNames[currentMonth] }} {{ currentYear }}
      </h2>
      
      <button mat-icon-button (click)="nextMonth()">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
    
    <div style="display:flex; gap:10px; align-items:center; justify-content:center;">
      <button mat-raised-button color="primary" (click)="goToToday()">
        <mat-icon>today</mat-icon> Today
      </button>
      
      <!-- Priority Filter -->
      <div style="display:flex; gap:5px; align-items:center;">
        <span style="font-size:14px; color:#666;">Priority:</span>
        <button mat-stroked-button 
                [color]="selectedPriority === 'all' ? 'primary' : ''"
                (click)="setPriorityFilter('all')"
                style="min-width:60px; height:32px; line-height:32px;">
          All
        </button>
        <button mat-stroked-button 
                [style.background-color]="selectedPriority === 'high' ? '#f44336' : ''"
                [style.color]="selectedPriority === 'high' ? 'white' : '#f44336'"
                (click)="setPriorityFilter('high')"
                style="min-width:60px; height:32px; line-height:32px; border-color:#f44336;">
          High
        </button>
        <button mat-stroked-button 
                [style.background-color]="selectedPriority === 'medium' ? '#ff9800' : ''"
                [style.color]="selectedPriority === 'medium' ? 'white' : '#ff9800'"
                (click)="setPriorityFilter('medium')"
                style="min-width:60px; height:32px; line-height:32px; border-color:#ff9800;">
          Medium
        </button>
        <button mat-stroked-button 
                [style.background-color]="selectedPriority === 'low' ? '#4caf50' : ''"
                [style.color]="selectedPriority === 'low' ? 'white' : '#4caf50'"
                (click)="setPriorityFilter('low')"
                style="min-width:60px; height:32px; line-height:32px; border-color:#4caf50;">
          Low
        </button>
      </div>
      
      <!-- Status Filter -->
      <div style="display:flex; gap:5px; align-items:center;">
        <span style="font-size:14px; color:#666;">Status:</span>
        <button mat-stroked-button 
                [color]="selectedStatus === 'all' ? 'primary' : ''"
                (click)="setStatusFilter('all')"
                style="min-width:80px; height:32px; line-height:32px;">
          All
        </button>
        <button mat-stroked-button 
                [style.background-color]="selectedStatus === 'to do' ? '#2196f3' : ''"
                [style.color]="selectedStatus === 'to do' ? 'white' : '#2196f3'"
                (click)="setStatusFilter('to do')"
                style="min-width:80px; height:32px; line-height:32px; border-color:#2196f3;">
          To Do
        </button>
        <button mat-stroked-button 
                [style.background-color]="selectedStatus === 'in progress' ? '#ff9800' : ''"
                [style.color]="selectedStatus === 'in progress' ? 'white' : '#ff9800'"
                (click)="setStatusFilter('in progress')"
                style="min-width:100px; height:32px; line-height:32px; border-color:#ff9800;">
          In Progress
        </button>
        <button mat-stroked-button 
                [style.background-color]="selectedStatus === 'done' ? '#4caf50' : ''"
                [style.color]="selectedStatus === 'done' ? 'white' : '#4caf50'"
                (click)="setStatusFilter('done')"
                style="min-width:80px; height:32px; line-height:32px; border-color:#4caf50;">
          Done
        </button>
      </div>
    </div>
  </div>

  <!-- Calendar Grid -->
  <div style="background:rgba(255,255,255,0.95); padding:20px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1);">
    <!-- Day Headers -->
    <div style="display:grid; grid-template-columns:repeat(7, 1fr); gap:2px; margin-bottom:10px;">
      <div style="text-align:center; font-weight:600; padding:10px; background:#e3f2fd; border-radius:4px;">Sun</div>
      <div style="text-align:center; font-weight:600; padding:10px; background:#e3f2fd; border-radius:4px;">Mon</div>
      <div style="text-align:center; font-weight:600; padding:10px; background:#e3f2fd; border-radius:4px;">Tue</div>
      <div style="text-align:center; font-weight:600; padding:10px; background:#e3f2fd; border-radius:4px;">Wed</div>
      <div style="text-align:center; font-weight:600; padding:10px; background:#e3f2fd; border-radius:4px;">Thu</div>
      <div style="text-align:center; font-weight:600; padding:10px; background:#e3f2fd; border-radius:4px;">Fri</div>
      <div style="text-align:center; font-weight:600; padding:10px; background:#e3f2fd; border-radius:4px;">Sat</div>
    </div>

    <!-- Calendar Days -->
    <div style="display:grid; grid-template-columns:repeat(7, 1fr); gap:2px;">
      <div *ngFor="let day of calendarDays" 
           [style.background-color]="day.isToday ? '#fff3e0' : '#ffffff'"
           [style.opacity]="day.isCurrentMonth ? '1' : '0.5'"
           [style.border]="day.isToday ? '2px solid #ff9800' : '1px solid #e0e0e0'"
           style="min-height:120px; padding:8px; border-radius:4px; position:relative;">
        
        <!-- Day Number -->
        <div [style.color]="day.isCurrentMonth ? '#333' : '#999'"
             [style.font-weight]="day.isToday ? '700' : '500'"
             style="font-size:14px; margin-bottom:6px;">
          {{ day.dayNumber }}
        </div>

        <!-- Tasks for this day -->
        <div style="display:flex; flex-direction:column; gap:4px;">
          <div *ngFor="let task of day.tasks.slice(0, 3)"
               [matTooltip]="getTaskTooltip(task)"
               [style.background-color]="getPriorityColor(task.priority)"
               style="padding:4px 6px; border-radius:4px; font-size:11px; color:white; 
                      overflow:hidden; text-overflow:ellipsis; white-space:nowrap; cursor:pointer;">
            {{ task.name }}
          </div>
          
          <!-- More tasks indicator -->
          <div *ngIf="day.tasks.length > 3"
               style="font-size:10px; color:#666; font-weight:500; padding:2px;">
            +{{ day.tasks.length - 3 }} more
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Legend -->
  <div style="background:rgba(255,255,255,0.95); padding:20px; border-radius:8px; margin-top:20px; box-shadow:0 2px 8px rgba(0,0,0,0.1);">
    <h3 style="margin:0 0 15px 0; font-size:16px; font-weight:500;">Legend</h3>
    
    <div style="display:flex; gap:30px; flex-wrap:wrap;">
      <div>
        <div style="font-weight:600; margin-bottom:8px; font-size:14px;">Priority Colors:</div>
        <div style="display:flex; gap:15px; align-items:center;">
          <div style="display:flex; align-items:center; gap:6px;">
            <div style="width:20px; height:20px; background:#f44336; border-radius:3px;"></div>
            <span style="font-size:13px;">High</span>
          </div>
          <div style="display:flex; align-items:center; gap:6px;">
            <div style="width:20px; height:20px; background:#ff9800; border-radius:3px;"></div>
            <span style="font-size:13px;">Medium</span>
          </div>
          <div style="display:flex; align-items:center; gap:6px;">
            <div style="width:20px; height:20px; background:#4caf50; border-radius:3px;"></div>
            <span style="font-size:13px;">Low</span>
          </div>
        </div>
      </div>
      
      <div>
        <div style="font-weight:600; margin-bottom:8px; font-size:14px;">Status Colors:</div>
        <div style="display:flex; gap:15px; align-items:center;">
          <div style="display:flex; align-items:center; gap:6px;">
            <div style="width:20px; height:20px; background:#2196f3; border-radius:3px;"></div>
            <span style="font-size:13px;">To Do</span>
          </div>
          <div style="display:flex; align-items:center; gap:6px;">
            <div style="width:20px; height:20px; background:#ff9800; border-radius:3px;"></div>
            <span style="font-size:13px;">In Progress</span>
          </div>
          <div style="display:flex; align-items:center; gap:6px;">
            <div style="width:20px; height:20px; background:#4caf50; border-radius:3px;"></div>
            <span style="font-size:13px;">Done</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
